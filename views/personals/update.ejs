<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../partials/head'); %>
</head>
<body class="container">

<header>
  <%- include('../partials/header'); %>
</header>

<main>

	<div class="card mt-4">
	  <div class="card-header">
	     <h5 class="card-title">Editar Personal</h5>
	  </div>
	  <div class="card-body">
	
		<form method="POST" action="/personal/update/<%= personal._id %>">
			<div class="form-group">
				 <label for="Nom">Nom</label>
				<input type="text" name="nom" class="form-control" value="<%= personal.nom %>" required>
			</div>
            <div class="form-group">
                <label for="Cognoms">Cognoms</label>
               <input type="text" name="cognoms" class="form-control" value="<%= personal.cognoms %>" required>
           </div>
           <div class="form-group">
            <label for="familia">Familia</label>
            <input type="text" name="familia" class="form-control" value="<%= personal.familia%>" required>
           </div>
           <div class="form-group">
            <label for="Gmail">Gmail</label>
           <input type="text" name="gmail" class="form-control" value="<%= personal.gmail %>" required>
           </div>
		   <div class="form-group">
            <label for="contrasenya">Contrasenya</label>
           <input type="text" name="contrasenya" class="form-control" value="<%= personal.contrasenya %>" required>
           </div>
			<div class="form-group">
				<label for="carrecs">Carrecs </label>
				<% var marcarCheck = false; %>
					<% carrec_list.forEach( function(carrec) { %>
						<% personal.carrecs.forEach( function (personalCarrec) { %>
							<% if (carrec._id.toString() == personalCarrec._id.toString()) { %>
								<% marcarCheck = true; %>
							<% }}); %>
						
							<% if (marcarCheck) { %>
								<div class="form-check">     
									<input type="checkbox" name="carrecs[]" id="carrecs" class="form-check-input" value="<%= carrec._id %>" checked="checked" />
									<label class="form-check-label" for="carrecs"><%= carrec.nom %></label>
								  </div>
								  <% marcarCheck = false; %>
							<% } else { %>
								<div class="form-check">     
									<input type="checkbox" name="carrecs[]" id="carrecs" class="form-check-input" value="<%= carrec._id %>">
									<label class="form-check-label" for="carrecs"><%= carrec.nom %></label>
								  </div>				
					<%}}); %>	
				</div>
			<button type="submit" class="btn btn-primary">Save
			</button>
			<a class="btn btn-danger" href="/personal/delete/<%= personal._id %>" role="button">Delete</a>

		</form>

		<% if (typeof error !== "undefined") { %>
			<div class="alert alert-primary mt-2" role="alert">
			    <p><%= error %></p>
			</div>
		<% } %>

		<% if (typeof message !== "undefined") { %>
			<div class="alert alert-primary mt-2" role="alert">
			    <p><%= message %></p>
			</div>
		<% } %>

	</div>
		
	</div>

</main>

<footer>
  <%- include('../partials/footer'); %>
</footer>

</body>
</html>